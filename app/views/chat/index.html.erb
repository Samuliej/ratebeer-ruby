<%= turbo_stream_from "chat_index" %>

<h1>Chat</h1>

<div class="mt-3 row auto">
  <div class="col-sm-8">
    <%= form_for(@chat_message) do |f| %>
      <div class="mb-3">
        <%= f.hidden_field :user_id, value: current_user.id %>
        <%= f.label "Message", class: "form-label" %>
        <%= f.text_area :content, class: "form-control" %>
      </div>

      <div>
        <%= f.submit "Send", class: "btn btn-primary" %>
      </div>
    <% end %>
  </div>
</div>

<div id="messages" class="mt-3 row auto">
  <div class="col-sm-8">
    <% @chat_messages.each do |m| %>
      <%= render "chat_message", chat_message: m %>
    <% end %>
  </div>
</div>